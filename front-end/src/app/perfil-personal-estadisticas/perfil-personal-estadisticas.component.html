<div class="container-fluid d-flex mx-0 px-0">


    <div class="col-auto col-xl-3  px-0 bg-light">
        <app-cabecera></app-cabecera>
    </div>

    <div *ngIf="!contenidoCargado" class="animacion col-12 col-xl-7">
        <div class="lds-roller">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
        <span class="animacion_texto">Cargando</span>
    </div>

    <div *ngIf="contenidoCargado" class="col-12 pe-5 pe-xl-0 col-xl-7 border fadeIn">



        <div class=" d-flex enlaces">

            <div class="col-4 d-flex justify-content-center enlace_izquierdo" routerLink="/perfil-personal"
                style="cursor: pointer;">
                <h2>Datos personales</h2>
            </div>
            <div class="col-4 d-flex justify-content-center enlace_izquierdo" routerLink="/amigos"
                style="cursor: pointer;">
                <h2>Amigos</h2>
            </div>
            <div class="col-4 d-flex justify-content-center enlace_derecho_marcado "
                routerLink="/perfil-personal-estadisticas" style="cursor: pointer;">
                <h2>Estadísticas</h2>
            </div>
        </div>

        <!-- Estadísticas de Rendimiento -->
        <div class="d-flex justify-content-center border-bottom">

            <div class="p-4">
                <h3>Rendimiento de las publicaciones</h3>
            </div>
        </div>

        <div class="row mx-0 w-100">
            <div class="col-12 col-sm-6 col-xl-4 px-3 border-end border-bottom my-3">
                <p class="ms-4">Publicaciones realizadas: {{numeroPosts}}</p>
                <p class="ms-4">Media de visitas: {{mediaViews}}</p>
                <p class="ms-4">Media de likes: {{mediaLikes}}</p>
                <p class="ms-4">Media de comentarios: {{mediaComentarios}}</p>
            </div>

            <div class="col-12 col-sm-6 col-xl-4 my-3 border-bottom border-end">

                <p class="ms-4">Máximo número de visitas: {{maxViews}}</p>
                <p class="ms-4">Máximo número de likes: {{maxLikes}}</p>

            </div>

            <div class="col-12 col-xl-4  my-3 border-bottom">
                <p class="ms-4">Total de visitas: {{sumaViews}}</p>
                <p class="ms-4">Total de likes: {{sumaLikes}}</p>
                <p class="ms-4">Total de comentarios: {{sumaComentarios}}</p>
            </div>
        </div>

       

        <!-- Estadisticas de los Posts -->
        <div class="d-flex justify-content-center ">
            <div class="text-center p-3">
                <h2>Publicaciones más vistas</h2>
            </div>
        </div>
        <hr>

        <div class="d-flex justify-content-center   py-5">
            <div class="row">
                <div *ngFor="let postViews of postsMasViews" class="card col-6 mx-5 mb-5" style="width: 18rem;">
                    <img *ngIf="postViews.imagen" class="card-img-top" src="{{postViews.imagen}}" alt="Card image cap">
                    <img *ngIf="!postViews.imagen" class="card-img-top" src="../../assets/imagen_default.jpg" alt="Card image cap">
                    <div class="card-body">
                        <h3 class="card-text">{{postViews.titulo}}</h3>
                        <hr>
                        <div class="row d-flex justify-content-end">
                            <!-- Visitas -->
                            <div class=" col-4">
                                <span class="material-symbols-outlined"> visibility </span>
                                <span>{{postViews.num_visitas}}</span>
                            </div>
                            <!-- Likes -->
                            <div class=" col-4">
                                <span class="material-symbols-outlined"> favorite </span>
                                <span>{{postViews.num_likes}}</span>
                            </div>

                            <!-- Mensajes -->
                            <div class=" col-4">
                                <span class="material-symbols-outlined"> comment </span>
                                <span>3</span>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>


        <hr>
        <div class="row ">
            <div class="text-center p-3">
                <h2>Publicaciones más gustadas</h2>
            </div>
        </div>
        <hr>
        <div class="d-flex justify-content-center   py-5">
            <div class="row">
                <div *ngFor="let postLikes of postMasLikes" class="card col-6 mx-5 mb-5" style="width: 18rem;">
                    <img *ngIf="postLikes.imagen" class="card-img-top" src="{{postLikes.imagen}}" alt="Card image cap">
                    <img *ngIf="!postLikes.imagen" class="card-img-top" src="../../assets/imagen_default.jpg" alt="Card image cap">
                    <div class="card-body">
                        <h3 class="card-text">{{postLikes.titulo}}</h3>
                        <hr>
                        <div class="row d-flex justify-content-end">
                            <!-- Visitas -->
                            <div class=" col-4">
                                <span class="material-symbols-outlined"> visibility </span>
                                <span>{{postLikes.num_visitas}}</span>
                            </div>
                            <!-- Likes -->
                            <div class=" col-4">
                                <span class="material-symbols-outlined"> favorite </span>
                                <span>{{postLikes.num_likes}}</span>
                            </div>

                            <!-- Mensajes -->
                            <div class=" col-4">
                                <span class="material-symbols-outlined"> comment </span>
                                <span>3</span>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

    </div>

    <div class="border  col-xl-2 d-none d-xl-block">
        <app-contactos-chat></app-contactos-chat>
    </div>


</div>